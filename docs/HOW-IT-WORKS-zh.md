# å·¥ä½œåŸç†

æœ¬æ–‡æ¡£è§£é‡Šè®¨è®ºæ¨¡å¼ç³»ç»Ÿçš„å†…éƒ¨æ¶æ„å’Œæœºåˆ¶ã€‚

> å¿«é€Ÿå¼€å§‹å’Œå®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜… [README](../README-zh.md)ã€‚

---

## æ¦‚è¿°

è®¨è®ºæ¨¡å¼é‡‡ç”¨ **å•ä¸€ Skill + Hooks** æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI å¹³å°                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         Skill                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚                   discuss-for-specs                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ ä¸‰ç§è§’è‰²ï¼ˆè‹æ ¼æ‹‰åº•æé—®è€…ã€é­”é¬¼ä»£è¨€äººã€çŸ¥è¯†è¿æ¥è€…ï¼‰   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ é—®é¢˜ç±»å‹åŒºåˆ†                                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ è®¨è®ºä¼˜å…ˆåŸåˆ™                                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ é—®é¢˜è¿½è¸ªä¸å…±è¯†è¯†åˆ«                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ è¾“å‡ºç­–ç•¥ï¼ˆä¸é‡å¤ï¼‰                                  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         Hooks                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  track_file_edit    â”‚  â”‚   check_precipitation       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  (æ–‡ä»¶ç¼–è¾‘æ—¶è§¦å‘)    â”‚  â”‚   (å¯¹è¯ç»“æŸæ—¶è§¦å‘)           â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **æ³¨æ„**ï¼šä¹‹å‰çš„ç‰ˆæœ¬ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„ Skillï¼ˆ`discuss-coordinator` + `discuss-output`ï¼‰ã€‚
> è‡ª 2026-01-28 èµ·ï¼Œå·²åˆå¹¶ä¸ºå•ä¸€çš„ `discuss-for-specs` Skillã€‚
> å‚è§ [æ¶æ„å†³ç­– D7](../specs/discuss-for-specs-v1/3-architecture.md#d7-skill-architecture-merge)ã€‚

---

## Skill æ¶æ„

### discuss-for-specs

**ç›®çš„**ï¼šä¿ƒè¿›æ·±åº¦è®¨è®ºã€è¿½è¸ªé—®é¢˜ã€å¼•å¯¼å†³ç­–ã€ç®¡ç†ç»“æ„åŒ–è¾“å‡ºã€‚

**æ ¸å¿ƒç»„ä»¶**ï¼š

| ç»„ä»¶ | æè¿° |
|------|------|
| **ä¸‰ç§è§’è‰²** | è‹æ ¼æ‹‰åº•æé—®è€…ã€é­”é¬¼ä»£è¨€äººã€çŸ¥è¯†è¿æ¥è€… |
| **é—®é¢˜ç±»å‹** | äº‹å®å‹ / è®¾è®¡å‹ / å¼€æ”¾å‹é—®é¢˜é‡‡ç”¨ä¸åŒç­–ç•¥ |
| **è®¨è®ºä¼˜å…ˆ** | å…ˆæé—®å†è¾“å‡ºï¼›ä¸è¦çŒœæµ‹ |
| **é—®é¢˜è¿½è¸ª** | ç”Ÿå‘½å‘¨æœŸï¼šâšª å¾…è®¨è®º â†’ ğŸ”µ è®¨è®ºä¸­ â†’ âœ… å·²ç¡®è®¤ |
| **è¾“å‡ºç­–ç•¥** | outline.md å’Œå“åº”ä¹‹é—´ä¸é‡å¤ |
| **å…±è¯†è§„åˆ™** | ä»€ä¹ˆæ˜¯å…±è¯†ï¼Œä»€ä¹ˆä¸æ˜¯å…±è¯† |

**èŒè´£**ï¼š
- è§£æç”¨æˆ·æ„å›¾ï¼Œè¯†åˆ«è®¨è®ºä¸»é¢˜
- è¿½è¸ªé—®é¢˜ç”Ÿå‘½å‘¨æœŸ
- åˆ†æè¶‹åŠ¿ï¼Œæ£€æµ‹å…±è¯†
- æ¯è½®ç»“æŸåæ¸²æŸ“å’Œæ›´æ–° `outline.md`
- åœ¨ `decisions/` ç›®å½•åˆ›å»ºå†³ç­–æ–‡æ¡£

---

## Hooks æ¶æ„

Hooks è‡ªåŠ¨åŒ–å¤„ç†ä¸éœ€è¦ AI æ™ºèƒ½çš„"æµç¨‹æ€§å·¥ä½œ"ï¼š

### è®¾è®¡åŸåˆ™

> **æ™ºèƒ½å·¥ä½œäº¤ç»™ Agentï¼Œæµç¨‹å·¥ä½œäº¤ç»™ Hook**

| å·¥ä½œç±»å‹ | å¤„ç†è€… | ç¤ºä¾‹ |
|----------|--------|------|
| æ™ºèƒ½å·¥ä½œ | AI Skill | ç†è§£é—®é¢˜ã€åˆ†ææ–¹æ¡ˆã€è¯†åˆ«å…±è¯† |
| æµç¨‹å·¥ä½œ | Python Hooks | è®¡æ•°è½®æ¬¡ã€æ£€æŸ¥è¿‡æœŸã€æ–‡ä»¶æ‰«æ |

### Hook 1: æ–‡ä»¶ç¼–è¾‘è¿½è¸ª

**è§¦å‘æ—¶æœº**ï¼šAI ç¼–è¾‘æ–‡ä»¶å
- Claude Codeï¼š`PostToolUse` äº‹ä»¶ï¼ˆåŒ¹é… `Edit|Write|MultiEdit`ï¼‰
- Cursorï¼š`afterFileEdit` äº‹ä»¶

**è¡Œä¸º**ï¼š
1. æ£€æµ‹ç¼–è¾‘çš„æ–‡ä»¶æ˜¯å¦åœ¨ `.discuss/` ç›®å½•
2. åˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼ˆoutline / decision / noteï¼‰
3. æ›´æ–° `meta.yaml` ä¸­çš„æ–‡ä»¶è¿½è¸ªä¿¡æ¯
4. æ›´æ–°ä¼šè¯æ–‡ä»¶ç”¨äºè½®æ¬¡è®¡æ•°

### Hook 2: æ²‰æ·€æ£€æŸ¥

**è§¦å‘æ—¶æœº**ï¼šAI å¯¹è¯ç»“æŸæ—¶
- Claude Codeï¼š`Stop` äº‹ä»¶
- Cursorï¼š`stop` äº‹ä»¶

**è¡Œä¸º**ï¼š
1. æ£€æŸ¥ä¼šè¯æ–‡ä»¶ä¸­æ˜¯å¦æœ‰ outline æ›´æ–°
2. å¦‚æœæ²¡æœ‰ outline æ›´æ–° â†’ è·³è¿‡ï¼ˆä¸åœ¨è®¨è®ºæ¨¡å¼ï¼‰
3. å¦‚æœæœ‰ outline æ›´æ–° â†’ æ£€æŸ¥ decisions/notes æ˜¯å¦è¿‡æœŸ
4. è®¡ç®—ï¼š`current_round - last_updated_round`
5. å¦‚æœè¶…è¿‡é˜ˆå€¼ â†’ æé†’ç”¨æˆ·
6. æ¸…ç†ä¼šè¯æ–‡ä»¶

### åŸºäºä¼šè¯çš„è½®æ¬¡è®¡æ•°

ä¸ºç¡®ä¿è½®æ¬¡è®¡æ•°å‡†ç¡®ï¼ˆæ¯æ¬¡å¯¹è¯åªå¢åŠ ä¸€æ¬¡ï¼‰ï¼š

```
.discuss/.sessions/
â”œâ”€â”€ claude-code/
â”‚   â””â”€â”€ {sessionID}.json
â””â”€â”€ cursor/
    â””â”€â”€ {sessionID}.json
```

ä¼šè¯æ–‡ä»¶å†…å®¹ï¼š
```json
{
  "session_id": "abc123",
  "started_at": "2026-01-28T01:30:00Z",
  "outline_updated": true,
  "outline_paths": [".discuss/2026-01-28/topic/outline.md"]
}
```

---

## è®¨è®ºç›®å½•ç»“æ„

æ¯ä¸ªè®¨è®ºåˆ›å»ºä¸€ä¸ªç»“æ„åŒ–ç›®å½•ï¼š

```
.discuss/YYYY-MM-DD/topic-name/
â”œâ”€â”€ outline.md          # å®æ—¶è¿›åº¦è¿½è¸ª
â”œâ”€â”€ meta.yaml           # å…ƒæ•°æ®ï¼ˆç”± Hooks å®Œå…¨è‡ªåŠ¨åŒ–ï¼‰
â”œâ”€â”€ decisions/          # æ²‰æ·€çš„å†³ç­–
â”‚   â”œâ”€â”€ D01-topic.md
â”‚   â”œâ”€â”€ D02-topic.md
â”‚   â””â”€â”€ ...
â””â”€â”€ notes/              # å‚è€ƒèµ„æ–™
    â””â”€â”€ ...
```

> **æ³¨æ„**ï¼šä¹‹å‰çš„ç‰ˆæœ¬ä½¿ç”¨ `discuss/`ï¼ˆæ— ç‚¹å·ï¼‰ã€‚è‡ª 2026-01-28 èµ·ï¼Œ
> æ ‡å‡†åŒ–ä½ç½®æ˜¯ `.discuss/`ï¼ˆéšè—ç›®å½•ï¼‰ã€‚
> å‚è§ [æ¶æ„å†³ç­– D8](../specs/discuss-for-specs-v1/3-architecture.md#d8-discussion-directory-structure)ã€‚

### outline.md

å®æ—¶è¿½è¸ªè®¨è®ºçŠ¶æ€ï¼š

```markdown
# è®¨è®ºï¼šä¸»é¢˜åç§°

> çŠ¶æ€ï¼šè¿›è¡Œä¸­ | è½®æ¬¡ï¼šR[N] | æ—¥æœŸï¼šYYYY-MM-DD

## ğŸ”µ å½“å‰ç„¦ç‚¹
- å½“å‰æ­£åœ¨è®¨è®ºçš„é—®é¢˜

## âšª å¾…è®¨è®º
- [ ] Q1ï¼šæœªå›ç­”çš„é—®é¢˜

## âœ… å·²ç¡®è®¤
| å†³ç­– | æè¿° | æ–‡æ¡£ |
|------|------|------|
| D1: ç¬¬ä¸€ä¸ªå†³ç­– | ç®€è¿° | [D01](./decisions/D01-xxx.md) |

## âŒ å·²å¦å†³
- ï¼ˆè¢«å¦å†³çš„é€‰é¡¹åŠåŸå› ï¼‰
```

### meta.yaml

çŠ¶æ€è¿½è¸ª**å®Œå…¨ç”± Hooks ç»´æŠ¤**ï¼ˆé›¶ agent è´Ÿæ‹…ï¼‰ï¼š

```yaml
# åŸºç¡€ä¿¡æ¯ï¼ˆè‡ªåŠ¨è·å–ï¼‰
topic: "topic-name"           # ä»ç›®å½•åè·å–
created: 2026-01-28

# è½®æ¬¡ç®¡ç†ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰
current_round: 5

# é…ç½®
config:
  stale_threshold: 3          # N è½®æœªæ›´æ–°åˆ™æé†’

# æ–‡ä»¶è¿½è¸ªï¼ˆè‡ªåŠ¨æ‰«æï¼‰
decisions:
  - path: "decisions/D01-xxx.md"
    name: "D01-xxx.md"
    last_modified: "2026-01-28T01:30:00Z"
    last_updated_round: 4

notes:
  - path: "notes/analysis.md"
    name: "analysis.md"
    last_modified: "2026-01-28T00:45:00Z"
    last_updated_round: 2
```

> **æ³¨æ„**ï¼šä¹‹å‰çš„ç‰ˆæœ¬éœ€è¦ AI agent æ‰‹åŠ¨ç»´æŠ¤ meta.yamlã€‚
> è‡ª 2026-01-28 èµ·ï¼Œmeta.yaml å®Œå…¨ç”± Hooks è‡ªåŠ¨åŒ–ç»´æŠ¤ã€‚
> å‚è§ [æ¶æ„å†³ç­– D9](../specs/discuss-for-specs-v1/3-architecture.md#d9-metayaml-programmatic-automation)ã€‚

---

## å®‰è£…åçš„ç»„ä»¶

å®‰è£…åï¼Œç»„ä»¶åˆ†å¸ƒå¦‚ä¸‹ï¼š

### å…¨å±€ï¼ˆç”¨æˆ·çº§åˆ«ï¼‰

```
~/.discuss-for-specs/
â”œâ”€â”€ hooks/                    # Python hook è„šæœ¬
â”‚   â”œâ”€â”€ common/               # å…±äº«å·¥å…·
â”‚   â”œâ”€â”€ file-edit/            # æ–‡ä»¶ç¼–è¾‘è¿½è¸ª hook
â”‚   â””â”€â”€ stop/                 # æ²‰æ·€æ£€æŸ¥ hook
â””â”€â”€ logs/                     # Hook æ‰§è¡Œæ—¥å¿—
    â””â”€â”€ discuss-hooks-YYYY-MM-DD.log
```

### å¹³å°ç‰¹å®š

**Claude Code**ï¼š
```
~/.claude/
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ discuss-for-specs/         # å•ä¸€åˆå¹¶çš„ skill
â””â”€â”€ settings.json             # Hooks é…ç½®
```

**Cursor**ï¼š
```
~/.cursor/
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ discuss-for-specs/         # å•ä¸€åˆå¹¶çš„ skill
â””â”€â”€ hooks.json                # Hooks é…ç½®
```

### é¡¹ç›®çº§åˆ«ï¼ˆä½¿ç”¨ --targetï¼‰

ä½¿ç”¨ `--target /path/to/project` æ—¶ï¼š
```
/path/to/project/
â””â”€â”€ .cursor/                  # æˆ– .claude/
    â””â”€â”€ skills/
        â””â”€â”€ discuss-for-specs/
```

---

## æ—¥å¿—

Hooks è®°å½•æ‰€æœ‰æ“ä½œç”¨äºè°ƒè¯•ï¼š

**ä½ç½®**ï¼š`~/.discuss-for-specs/logs/discuss-hooks-YYYY-MM-DD.log`

**æ ¼å¼**ï¼š
```
2026-01-21 22:31:40 | INFO     | discuss-hooks | Hook Started: track_file_edit
2026-01-21 22:31:40 | DEBUG    | discuss-hooks | Input Data: {"file_path": "..."}
2026-01-21 22:31:40 | INFO     | discuss-hooks | Discussion detected: /path/to/.discuss/topic
2026-01-21 22:31:40 | INFO     | discuss-hooks | Hook Ended: track_file_edit [SUCCESS]
```

---

## å¹³å°æ”¯æŒ

| å¹³å° | Skills | Hooks | çŠ¶æ€ |
|------|--------|-------|------|
| Claude Code | âœ… | âœ… | å°±ç»ª |
| Cursor | âœ… | âœ… | å°±ç»ª |
| VS Code Copilot | â³ | â³ | è®¡åˆ’ä¸­ |
| Windsurf | â³ | â³ | è®¡åˆ’ä¸­ |

---

## ç›¸å…³æ–‡æ¡£

- [README](../README-zh.md) - å¿«é€Ÿå¼€å§‹å’Œå®‰è£…
- [AGENTS.md](../AGENTS.md) - AI agent æŒ‡å—
- [æ¶æ„è®¾è®¡](../specs/discuss-for-specs-v1/3-architecture.md) - è®¾è®¡å†³ç­–
- [è®¨è®ºè®°å½•](./../.discuss/) - å†å²è®¨è®º

---

**æœ€åæ›´æ–°**ï¼š2026-01-28
