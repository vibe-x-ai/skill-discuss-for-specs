# å·¥ä½œåŸç†

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»è®¨è®ºæ¨¡å¼ç³»ç»Ÿçš„å†…éƒ¨æ¶æ„å’Œæœºåˆ¶ã€‚

> å¿«é€Ÿå¼€å§‹å’Œå®‰è£…è¯´æ˜è¯·å‚è§ [README](README-zh.md)ã€‚

---

## æ¦‚è¿°

è®¨è®ºæ¨¡å¼é‡‡ç”¨ **åŒæŠ€èƒ½ + Hooks** æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI å¹³å°                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         æŠ€èƒ½ (Skills)                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ discuss-coordinator â”‚  â”‚      discuss-output         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ é—®é¢˜è¿½è¸ª         â”‚  â”‚  â€¢ å¤§çº²æ¸²æŸ“                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ è¶‹åŠ¿åˆ†æ         â”‚  â”‚  â€¢ å†³ç­–æ–‡æ¡£                 â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å…±è¯†æ£€æµ‹         â”‚  â”‚  â€¢ æ–‡ä»¶ç®¡ç†                 â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         é’©å­ (Hooks)                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  track_file_edit    â”‚  â”‚   check_precipitation       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  (æ–‡ä»¶ç¼–è¾‘æ—¶è§¦å‘)   â”‚  â”‚   (å¯¹è¯ç»“æŸæ—¶è§¦å‘)          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€èƒ½æ¶æ„

### discuss-coordinator

**èŒè´£**ï¼šä¿ƒè¿›è®¨è®ºæµç¨‹ã€è¿½è¸ªé—®é¢˜ã€å¼•å¯¼å†³ç­–ã€‚

**åŠŸèƒ½**ï¼š
- è§£æç”¨æˆ·æ„å›¾ï¼Œè¯†åˆ«è®¨è®ºä¸»é¢˜
- è¿½è¸ªé—®é¢˜ç”Ÿå‘½å‘¨æœŸï¼ˆğŸ”µ å½“å‰ç„¦ç‚¹ â†’ âšª å¾…å®š â†’ âœ… å·²ç¡®è®¤ï¼‰
- åˆ†æè¶‹åŠ¿ï¼Œæ£€æµ‹å…±è¯†
- åˆ¤æ–­å†³ç­–ä½•æ—¶å¯ä»¥æ²‰æ·€

### discuss-output

**èŒè´£**ï¼šç®¡ç†ç»“æ„åŒ–è¾“å‡ºå’Œæ–‡æ¡£ã€‚

**åŠŸèƒ½**ï¼š
- æ¯è½®åæ¸²æŸ“å’Œæ›´æ–° `outline.md`
- åœ¨ `decisions/` ç›®å½•åˆ›å»ºå†³ç­–æ–‡æ¡£
- ç®¡ç† `meta.yaml` çŠ¶æ€è¿½è¸ª
- å½’æ¡£è®¨è®ºå’Œç¬”è®°

---

## Hooks æ¶æ„

Hooks è‡ªåŠ¨åŒ–ä¸éœ€è¦ AI æ™ºèƒ½çš„"æµç¨‹å·¥ä½œ"ï¼š

### è®¾è®¡åŸåˆ™

> **æ™ºèƒ½å·¥ä½œç»™ Agentï¼Œæµç¨‹å·¥ä½œç»™ Hook**

| å·¥ä½œç±»å‹ | å¤„ç†è€… | ç¤ºä¾‹ |
|---------|--------|------|
| æ™ºèƒ½ | AI æŠ€èƒ½ | ç†è§£é—®é¢˜ã€åˆ†ææ–¹æ¡ˆã€è¯†åˆ«å…±è¯† |
| æµç¨‹ | Python Hooks | è®¡æ•°è½®æ¬¡ã€æ£€æŸ¥åœæ»ã€æ–‡ä»¶æ“ä½œ |

### Hook 1: æ–‡ä»¶ç¼–è¾‘è¿½è¸ª

**è§¦å‘æ—¶æœº**ï¼šAI æ¯æ¬¡ç¼–è¾‘æ–‡ä»¶å
- Claude Code: `PostToolUse` äº‹ä»¶ (matcher: `Edit|Write|MultiEdit`)
- Cursor: `afterFileEdit` äº‹ä»¶

**è¡Œä¸º**ï¼š
1. æ£€æµ‹ç¼–è¾‘çš„æ–‡ä»¶æ˜¯å¦åœ¨è®¨è®ºç›®å½•ä¸­
2. åœ¨ `meta.yaml` ä¸­è®¾ç½® `pending_update: true`
3. å§‹ç»ˆå…è®¸æ“ä½œç»§ç»­

### Hook 2: æ²‰æ·€æ£€æµ‹

**è§¦å‘æ—¶æœº**ï¼šAI å¯¹è¯ç»“æŸæ—¶
- Claude Code: `Stop` äº‹ä»¶
- Cursor: `stop` äº‹ä»¶

**è¡Œä¸º**ï¼š
1. æ‰«æ `pending_update: true` çš„è®¨è®º
2. æ›´æ–° `last_modified_run` å¹¶æ¸…é™¤ `pending_update`
3. é€’å¢ `current_run` è®¡æ•°å™¨
4. æ£€æŸ¥åœæ»æ–‡ä»¶ï¼ˆN è½®æœªæ›´æ–°ï¼‰
5. å¦‚æœåœæ»ï¼Œæé†’ç”¨æˆ·æ›´æ–°å¤§çº²/å†³ç­–

### ä¸¤é˜¶æ®µæé†’é€»è¾‘

| é˜¶æ®µ | é˜ˆå€¼ | è¡Œä¸º |
|------|------|------|
| å»ºè®® | `suggest_update_runs` (é»˜è®¤: 3) | è½»æŸ”æé†’ |
| å¼ºåˆ¶ | `force_update_runs` (é»˜è®¤: 10) | å¼ºçƒˆæé†’ï¼Œå¯èƒ½é˜»æ­¢ |

---

## è®¨è®ºç›®å½•ç»“æ„

æ¯ä¸ªè®¨è®ºåˆ›å»ºä¸€ä¸ªç»“æ„åŒ–ç›®å½•ï¼š

```
discuss/YYYY-MM-DD/topic-name/
â”œâ”€â”€ outline.md          # å®æ—¶è¿›åº¦è¿½è¸ª
â”œâ”€â”€ meta.yaml           # å…ƒæ•°æ®å’Œè½®æ¬¡è®¡æ•°
â”œâ”€â”€ decisions/          # æ²‰æ·€çš„å†³ç­–
â”‚   â”œâ”€â”€ D01-topic.md
â”‚   â”œâ”€â”€ D02-topic.md
â”‚   â””â”€â”€ ...
â””â”€â”€ notes/              # å‚è€ƒèµ„æ–™
    â””â”€â”€ ...
```

### outline.md

è®¨è®ºçŠ¶æ€çš„å®æ—¶è¿½è¸ªï¼š

```markdown
# è®¨è®ºï¼šä¸»é¢˜åç§°

## ğŸ”µ å½“å‰ç„¦ç‚¹
- å½“å‰æ­£åœ¨è®¨è®ºçš„é—®é¢˜

## âšª å¾…å®š
- [ ] Q1: æœªå›ç­”çš„é—®é¢˜
- [x] ~~Q2: å·²å›ç­”çš„é—®é¢˜~~ â†’ è§å†³ç­–

## âœ… å·²ç¡®è®¤
- D1: ç¬¬ä¸€ä¸ªå†³ç­– â†’ [æ–‡æ¡£](decisions/D01-xxx.md)
- D2: ç¬¬äºŒä¸ªå†³ç­– â†’ [æ–‡æ¡£](decisions/D02-xxx.md)

## âŒ å·²å¦å†³
- (è¢«å¦å†³çš„é€‰é¡¹åŠç†ç”±)
```

### meta.yaml

ç”± Hooks ç»´æŠ¤çš„çŠ¶æ€è¿½è¸ªï¼š

```yaml
# Hook ç»´æŠ¤çš„å­—æ®µ
created_at: "2026-01-20T10:00:00+08:00"
current_run: 5

# é…ç½®
config:
  suggest_update_runs: 3
  force_update_runs: 10

# æ–‡ä»¶çŠ¶æ€è¿½è¸ª
file_status:
  outline:
    last_modified_run: 4
    pending_update: false
  decisions:
    last_modified_run: 2
    pending_update: false
```

---

## å®‰è£…åçš„ç»„ä»¶åˆ†å¸ƒ

### å…¨å±€ï¼ˆç”¨æˆ·çº§åˆ«ï¼‰

```
~/.discuss-for-specs/
â”œâ”€â”€ hooks/                    # Python hook è„šæœ¬
â”‚   â”œâ”€â”€ common/               # å…±äº«å·¥å…·
â”‚   â”œâ”€â”€ file-edit/            # æ–‡ä»¶ç¼–è¾‘è¿½è¸ª hook
â”‚   â””â”€â”€ stop/                 # æ²‰æ·€æ£€æµ‹ hook
â””â”€â”€ logs/                     # Hook æ‰§è¡Œæ—¥å¿—
    â””â”€â”€ discuss-hooks-YYYY-MM-DD.log
```

### å¹³å°ç‰¹å®š

**Claude Code**:
```
~/.claude/
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ discuss-coordinator/  # åè°ƒæŠ€èƒ½
â”‚   â””â”€â”€ discuss-output/       # è¾“å‡ºæŠ€èƒ½
â””â”€â”€ settings.json             # Hooks é…ç½®
```

**Cursor**:
```
~/.cursor/
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ discuss-coordinator/  # åè°ƒæŠ€èƒ½
â”‚   â””â”€â”€ discuss-output/       # è¾“å‡ºæŠ€èƒ½
â””â”€â”€ hooks.json                # Hooks é…ç½®
```

### é¡¹ç›®çº§åˆ«ï¼ˆä½¿ç”¨ --targetï¼‰

ä½¿ç”¨ `--target /path/to/project` æ—¶ï¼š
```
/path/to/project/
â””â”€â”€ .cursor/                  # æˆ– .claude/
    â””â”€â”€ skills/
        â”œâ”€â”€ discuss-coordinator/
        â””â”€â”€ discuss-output/
```

---

## æ—¥å¿—

Hooks è®°å½•æ‰€æœ‰æ“ä½œç”¨äºè°ƒè¯•ï¼š

**ä½ç½®**ï¼š`~/.discuss-for-specs/logs/discuss-hooks-YYYY-MM-DD.log`

**æ ¼å¼**ï¼š
```
2026-01-21 22:31:40 | INFO     | discuss-hooks | Hook Started: track_file_edit
2026-01-21 22:31:40 | DEBUG    | discuss-hooks | Input Data: {"file_path": "..."}
2026-01-21 22:31:40 | INFO     | discuss-hooks | Discussion detected: /path/to/discuss/topic
2026-01-21 22:31:40 | INFO     | discuss-hooks | Hook Ended: track_file_edit [SUCCESS]
```

---

## å¹³å°æ”¯æŒ

| å¹³å° | æŠ€èƒ½ | Hooks | çŠ¶æ€ |
|------|------|-------|------|
| Claude Code | âœ… | âœ… | å°±ç»ª |
| Cursor | âœ… | âœ… | å°±ç»ª |
| VS Code Copilot | â³ | â³ | è®¡åˆ’ä¸­ |
| Windsurf | â³ | â³ | è®¡åˆ’ä¸­ |

---

## ç›¸å…³é“¾æ¥

- [README](README-zh.md) - å¿«é€Ÿå¼€å§‹å’Œå®‰è£…
- [AGENTS.md](AGENTS.md) - AI ä»£ç†æŒ‡å—
- [æ¶æ„è®¨è®º](discuss/2026-01-17/skill-discuss-architecture-design/outline.md) - è®¾è®¡å†³ç­–

---

**æœ€åæ›´æ–°**ï¼š2026-01-22
